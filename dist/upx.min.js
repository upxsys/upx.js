/*!
 * ============================================================
 *  _   _________   __  _____           _
 * | | | | ___ \ \ / / /  ___|         | |
 * | | | | |_/ /\ V /  \ `--. _   _ ___| |_ ___ _ __ ___  ___
 * | | | |  __/ /   \   `--. \ | | / __| __/ _ \ '_ ` _ \/ __|
 * | |_| | |   / /^\ \ /\__/ / |_| \__ \ ||  __/ | | | | \__ \
 *  \___/\_|   \/   \/ \____/ \__, |___/\__\___|_| |_| |_|___/
 *                             __/ |
 *                            |___/      
 * ============================================================
 *
 * UPX Wrapper Library v1.0.1
 * http://www.upxsys.com/
 *
 * Copyright 2014 UPX Systems
 * Released under the LGPL license
 * https://www.gnu.org/licenses/lgpl.html
 *
 * Date: 2014-07-10
 * Author: Mario Penterman
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.UPX=b(a.$)}(this,function(a){var b=function(){var b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j="user",k=function(a,b){var c=[];for(var d in a){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f?k(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&")},l=function(){var a={};if(null===c)throw new Error("Account should be set.");if(a.account=c,null===i)throw new Error("Password, Hash, Apikey or Anonymous should be set.");if(a.mode=i,null===j)throw new Error("User or subuser should be set.");return a.rights=j,"subuser"==j?(a.subaccount=e,a.user=d):a.user=d,"password"==i?a.password=f:"apikey"==i?a.apikey=g:"hash"==i&&(a.hash=h),a};this.setServer=function(a){b=a},this.setAccount=function(a){c=a},this.setUser=function(a){d=a,e=null,j="user"},this.setSubaccount=function(a){e=a,j="subuser"},this.setAnonymous=function(){d="anonymous",j="anonymous",e=null,f=null,h=null,g=null,i="none"},this.setPassword=function(a){f=a,h=null,g=null,i="password"},this.setHash=function(a){h=a,f=null,g=null,i="hash"},this.setApikey=function(a){g=a,f=null,h=null,i="apikey"},this.call=function(c,d,e,f){if("undefined"==typeof c)throw new Error("Module is a required parameter.");if("undefined"==typeof d)throw new Error("Method is a required parameter.");if(null==b)throw new Error("Server should be set.");var g=b+"/?action=request&api=json&module="+c+"&instance=0&function="+d,e=e||{},h=l(),f=f||{};return a.ajax(a.merge({type:"POST",dataType:"json",url:g,timeout:15e3,processData:!1,data:k({params:e,auth:h})},f)).then(function(b){return a.Deferred(function(a){b.success?a.resolve(b.response):a.reject(b)}).promise()},function(b,c,d){return a.Deferred(function(a){"timeout"===d?a.reject("timeout"):501==b.status&&a.reject("501")}).promise()})},this.prepareCall=function(b,c,d){return c=c||function(){},d=d||function(){},function(){var e=b();return a.when(e).then(c,d),e}},this.multiCall=function(b,c,d){return c=c||function(){},d=d||function(){},function(){var e=[];a.each(b,function(){e.push(this())}),a.when.apply(a,e).then(c,d)}}};return b});